{"ast":null,"code":"import React,{useState,useEffect}from'react';import Nature from'./Nature';import Author from'./Author';import{Outlet,useLocation}from'react-router-dom';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Content(_ref){let{postdata}=_ref;const[loading,setLoading]=useState(false);const[title,settitle]=useState();const[content,setcontent]=useState();const[id,setid]=useState();const[nature,setnature]=useState();const[date,setdate]=useState(\"\");const[img,setimg]=useState();//   // find out the id of blog\nconst location=useLocation();const[messages,setmessages]=useState();const[textarea,settextarea]=useState();function textareahandler(event){settextarea(event.target.value);}const postcomment=async()=>{try{let req={\"message\":textarea,\"bId\":id,\"token\":document.cookie.substring(6)};let data=await fetch('https://blog-app-api-804s.onrender.com/api/postcomment',{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({...req})});let datan=await data.json();console.log(\"comment created\");console.log(datan);if(datan.success===false){toast.error(\"You need to logedin.\");}else{toast.success(\"Successfully created comment.\");}call();}catch(error){console.log(error);toast.alert(\"You need to logedin fo posting comments.\");alert(\"You need to logedin fo posting comments.\");}};const call=async()=>{let bId=location.pathname.split(\"/\").at(-1).replaceAll(\"-\",\" \");let data=await fetch('https://blog-app-api-804s.onrender.com/api/getcomment',{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({\"bId\":bId})});let datan=await data.json();setmessages(datan.data);console.log(\"comments data\",datan);postdata.forEach(element=>{if(element._id===bId){setid(bId);console.log(element.title);setcontent(element.content);setnature(element.nature);setdate(element.date);settitle(element.title);setimg(element.img);console.log(\"founded\");}});console.log(bId);console.log(`postdata is ${id},${nature}`);console.log(title);};const fetchdata=async()=>{try{let bId=location.pathname.split(\"/\").at(-1).replaceAll(\"-\",\" \");// console.log(typeof(bId));\n// let bodyData={\n//   \"_id\":bId\n// }\nlet data=await fetch(`https://blog-app-api-804s.onrender.com/api/getaPost/${bId}`);let datan=await data.json();let findata=datan.data[0];console.log(findata);settitle(findata.title);setimg(findata.img);setnature(findata.nature);setdate(findata.date);setcontent(findata.content);setid(findata._id);}catch(error){console.log(error);console.log(\"error occured in geting a post\");}};useEffect(()=>{setLoading(true);console.log(\"fetch request sent\");fetchdata();console.log(\"fetch request completed\");call();setLoading(false);},[location]);return/*#__PURE__*/_jsx(\"div\",{children:loading?/*#__PURE__*/_jsx(\"div\",{children:\"loading\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"containercontent content-article\",children:[/*#__PURE__*/_jsx(Nature,{nature:nature,children:\" \"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl\",children:title}),/*#__PURE__*/_jsx(Author,{Date:date}),/*#__PURE__*/_jsx(\"img\",{src:img}),/*#__PURE__*/_jsx(\"p\",{children:content}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"comments\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Comments\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"comment\",children:messages===null||messages===void 0?void 0:messages.map(element=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"cmt\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"userinfo\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"username\",children:[/*#__PURE__*/_jsx(\"i\",{class:\"fa-solid fa-user\"}),/*#__PURE__*/_jsx(\"h2\",{children:element.name})]}),/*#__PURE__*/_jsx(\"p\",{children:element.date.substring(0,10)})]}),/*#__PURE__*/_jsx(\"p\",{children:element.message})]});})}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"leave\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Leave a Comment\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"inputcommment\",placeholder:\"Type here..\",onChange:textareahandler}),/*#__PURE__*/_jsx(\"button\",{className:\"button-5\",onClick:postcomment,children:\"Post Comment\"})]})]})]})});}","map":{"version":3,"names":["React","useState","useEffect","Nature","Author","Outlet","useLocation","toast","jsx","_jsx","jsxs","_jsxs","Content","_ref","postdata","loading","setLoading","title","settitle","content","setcontent","id","setid","nature","setnature","date","setdate","img","setimg","location","messages","setmessages","textarea","settextarea","textareahandler","event","target","value","postcomment","req","document","cookie","substring","data","fetch","method","headers","body","JSON","stringify","datan","json","console","log","success","error","call","alert","bId","pathname","split","at","replaceAll","forEach","element","_id","fetchdata","findata","children","className","Date","src","map","class","name","message","placeholder","onChange","onClick"],"sources":["/Users/kartikranaut/Documents/github/From_My_Pen/src/Components/Content.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport Nature from './Nature'\nimport Author from './Author'\n\nimport { Outlet,useLocation } from 'react-router-dom'\nimport { toast } from 'react-toastify'\n\nexport default function Content({postdata}) {\n  const [loading,setLoading]= useState(false);\n  const [title,settitle]= useState();\n  const [content,setcontent]= useState();\n  const [id,setid]= useState();\n  const [nature,setnature]= useState();\n  const [date,setdate]= useState(\"\");\n  const [img,setimg]= useState();\n  \n//   // find out the id of blog\n  const location = useLocation();\n  \n  const [messages,setmessages]= useState();\n  const [textarea,settextarea]= useState();\n  function textareahandler(event){\n    settextarea(event.target.value)\n  }\n\n\n  const postcomment=async()=>{\n    try{\n\n    \n    let req={\n      \"message\":textarea,\n      \"bId\":id,\n      \"token\":document.cookie.substring(6)\n    }\n    let data= await fetch('https://blog-app-api-804s.onrender.com/api/postcomment',{\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({...req}),\n    });\n    let datan= await data.json();\n    console.log(\"comment created\");\n    console.log(datan);\n    if(datan.success===false){\n      toast.error(\"You need to logedin.\");\n    }\n    else{\n      toast.success(\"Successfully created comment.\");\n    }\n    call();\n  }catch(error){\n    console.log(error);\n    toast.alert(\"You need to logedin fo posting comments.\");\n    alert(\"You need to logedin fo posting comments.\");\n  }\n  }\n\n\n  const call= async()=>{\n    let bId= location.pathname.split(\"/\").at(-1).replaceAll(\"-\",\" \");\n    \n    \n\n\n  let data= await fetch('https://blog-app-api-804s.onrender.com/api/getcomment',{\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\"bId\":bId }),\n  });\n  let datan= await data.json();\n  setmessages(datan.data);\n  console.log(\"comments data\",datan);\n\n    postdata.forEach(element => {\n      if(element._id===bId){\n      setid(bId);\n      console.log(element.title);\n      setcontent(element.content);\n      setnature(element.nature);\n      setdate(element.date);\n      settitle(element.title);\n      setimg(element.img);\n    console.log(\"founded\")\n    }\n  });\n  console.log(bId);\n  console.log(`postdata is ${id},${nature}`);\n  console.log(title);\n};\n\nconst fetchdata = async()=>{\n          try{  \n            let bId= location.pathname.split(\"/\").at(-1).replaceAll(\"-\",\" \");\n            // console.log(typeof(bId));\n            // let bodyData={\n            //   \"_id\":bId\n            // }\n            let data= await fetch(`https://blog-app-api-804s.onrender.com/api/getaPost/${bId}`);\n              let datan= await data.json();\n              let findata=datan.data[0];\n              console.log(findata);\n              settitle(findata.title);\n              setimg(findata.img);\n              setnature(findata.nature);\n              setdate(findata.date);\n              setcontent(findata.content);\n              setid(findata._id);\n            }\n            catch(error){\n              console.log(error);\n              console.log(\"error occured in geting a post\");\n            }\n}\nuseEffect(()=>{\n  setLoading(true);\n  console.log(\"fetch request sent\");\n  fetchdata();\n  console.log(\"fetch request completed\");\n  call();\n  setLoading(false);\n},[location])\n  return (\n    <div>\n        {\n\n          loading ? <div>loading</div> :\n          <div className='containercontent content-article'>\n        \n        <Nature nature={nature}> </Nature>\n        <h1 className='text-3xl'>{title}</h1>\n        <Author Date={date} ></Author>\n        <img src={img}></img>\n        <p>\n        {\n          content\n        }\n        </p>\n        <br></br>\n        <div className='comments'>\n          <h1>Comments</h1>\n          <hr></hr>\n          <div className='comment'>\n\n              {\n                messages?.map(element=>{\n                  return(\n                    <div className='cmt'>\n                      <div className='userinfo'>\n                        <div className='username'> \n                          <i class=\"fa-solid fa-user\"></i>\n                          <h2>{element.name}</h2>\n                        </div>\n                          <p>{element.date.substring(0,10)}</p>\n                        </div>\n                        <p>{element.message}</p>\n                      \n                    </div>\n                  )\n                })\n              }\n          </div>\n          <hr></hr>\n          <div className='leave'>\n              <h1>Leave a Comment</h1>\n              <textarea className =\"inputcommment\" placeholder='Type here..' onChange={textareahandler}></textarea>\n              <button className='button-5' onClick={postcomment}>Post Comment</button>\n          </div>\n        </div>\n    </div>\n        }\n   \n   \n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}